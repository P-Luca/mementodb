<!--
  Test code for TheGamesDb data source

  This was designed to run in Firefox using the CORS Everywhere extension.
  https://addons.mozilla.org/en-US/firefox/addon/cors-everywhere/
  https://github.com/spenibus/cors-everywhere-firefox-addon
-->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Memento database test</title>
  <script type="text/javascript" src="test.js"></script>
  <script type="text/javascript" src="places.js"></script>
  <script type="text/javascript">
    var places = new Places("it", "xxx-xxx-3333-3322211");

    function search(text) {
      var box = document.getElementById("results");
      box.innerHTML = "";
      results = places.search(text);
      for (x in results) {
        var element = results[x];
        box.innerHTML = box.innerHTML + "<a href=\"#\" onclick=\"details(" + x + ")\"><img src=\"" + element.thumb + "\" />" + element.title + " - " +
          element.description + "</a>" +
          " (<a href=\"https://www.openstreetmap.org/#map=19/" + element.lat + "/" + element.lon + "\">Posizione</a>)" +
          "<br>";
      }
      console.log(results);
    }

    function details(id) {
      var details = places.details(results[id].pageid);
      log(details);
    }

  </script>
</head>

<body>
  <input type="text" id="text" />
  <button onclick="search(document.getElementById('text').value)">Search</button>
  <hr/>
  <p id="results"></p>
</body>

</html>
