<!--
  Test code for TheGamesDb data source

  This was designed to run in Firefox using the CORS Everywhere extension.
  https://addons.mozilla.org/en-US/firefox/addon/cors-everywhere/
  https://github.com/spenibus/cors-everywhere-firefox-addon
-->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Memento database test</title>
    <script type="text/javascript" src="test.js"></script>
    <script type="text/javascript" src="wikipedia.js"></script>
    <script type="text/javascript" src="osm.js"></script>
    <!-- <script type="text/javascript" src="google.js"></script> -->
    <script type="text/javascript">
      function search(text) {
        var box = document.getElementById("results");
        box.innerHTML = "";
        // var wiki = new Wikipedia(text);
        // var results = wiki.search(wiki.cleanQuery);
        var wiki = new Osm("it");
        var results = wiki.search(text);
        results.forEach(element => {
          box.innerHTML = box.innerHTML + "<a href=\"#\" onclick=\"details('"+element.pageid+"')\"><img src=\""+element.thumb+"\" />" + element.title + " - " + element.description + "</a><br>"; 
        });
        console.log(results);
      }

      function details(id) {
        var wiki = new Osm("it");
        var details = wiki.details(id);
        log(details);
      }
/*
	var google = new Google("AIzaSyD8xtPvTKeqVQo8gaN8vy4C-3-zOc644I4");
	var results = google.search("Gyokusen tei");
	console.log(results);

	var details = google.details(results[0].placeid);
	log(details);
  */
    </script>
  </head>
  <body>
      <input type="text" id="text" />
      <button onclick="search(document.getElementById('text').value)">Search</button>

      <p id="results"></p>
  </body>
</html>
